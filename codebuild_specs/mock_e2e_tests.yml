version: 0.2
env:
  shell: bash
  variables:
    JEST_JUNIT_OUTPUT: 'reports/junit/js-test-results.xml'
    NODE_OPTIONS: --max-old-space-size=4096
phases:
  pre_build:
    commands:
      - source shared-scripts.sh && _waitForJobs build_linux requirePrevJobsToSucceed
      - source ./shared-scripts.sh && _mockE2ETests
  build:
    run-as: codebuild-user
    commands:
      - source ./shared-scripts.sh && _mockE2ETestsStep2
